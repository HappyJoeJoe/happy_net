mysql每一条数据包含三个隐藏字段：
自增id: 没有聚簇索引时，innodb自动默认生成一个聚簇索引
事务id: 执行 insert/update 语句时，该记录的事务id被赋予为当前事务id
删除id: 将当前事务id赋予为删除id

隔离机制在不可重复读情况下：
1. select会读取事务id <= 当前事务id的记录
2. select会读取删除id为null或删除id大于当前事务id的记录
简而言之，在开启事务的那一刻，对于该事务而言，一切的记录那一刻都是静止的，还是原来的那些记录，所以mvcc只是实现了快照读，而非当前读。
     事务1                                | 事务2
t0| begin                                |
t1| select * from people                 |
t2|                                      | insert into people values(3, 30)
t3| select * from people                 |
t4| update people set age=33 where id=3  |
t5| select * from people                 |

t1 和 t3 由于查询的数据实物id均小于事务1此时的id，所以查询的数据都是一样的，满足可重复读
t4 此时该条记录的事务id被改为事务1的id，则t5时刻查询的数据多出了一条记录，此为幻读。

如何防止幻读：
1. 快照读时，mvcc可以
2. 当前读时，得加行锁或者间隙锁


主键索引 vs 唯一索引
1. 主键是一种特殊的唯一索引
2. 唯一索引可以为空，而主键不行
3. 主键只有一个，而唯一索引可以有很多个

普通索引
普通索引的值可以重复，且可以为空
主键和唯一索引的值不可以重复且只能唯一
唯一索引可以为空，主键不行